export REAL_HOME=$HOME
export HOME=$GASH_HOME

export HISTFILE=$GASH_DATA/history
export HISTCONTROL="ignoredups"
export HISTIGNORE=""
export HISTSIZE=50000
export HISTFILESIZE=50000

export PATH=$PATH:$GASH_BASE/bin:$GASH_BIN:$GASH_LOCAL_BIN

source "$GASH_LIB/game_shell.sh"


export PS1='[mission $(_get_current_mission)] $ '
export PS2="> "
export PS3=""
export PS4="+ "

su() {
    echo "gash: su: command not found" >&2
}

sudo() {
    echo "gash: sudo: command not found" >&2
}

doas() {
    echo "gash: doas: command not found" >&2
}

for f in $GASH_CONFIG/*.sh
do
    [ -f "$f" ] && source "$f"
done


if [ -n "$GASH_DEBUG_MISSION" ]
then
    _gash_start "$GASH_DEBUG_MISSION"
else
    n=$(_get_current_mission)
    if [ -z "$n" ]
    then
        _gash_start 1
    cat <<EOM
**********************************************
*                                            *
*     Commencez par taper la commande        *
*       $ gash show                          *
*     pour dÃ©couvrir le premier objectif     *
*     et                                     *
*       $ gash check                         *
*     pour valider vos missions.             *
*                                            *
*     La commande                            *
*       $ gash help                          *
*     affiche la liste des commandes gash.   *
*                                            *
**********************************************
EOM
    else
        _gash_restart "$n"
        cat <<EOM
**********************************************
*     Rappel : la commande                   *
*       $ gash help                          *
*     affiche la liste des commandes gash.   *
**********************************************
EOM
    fi
fi
